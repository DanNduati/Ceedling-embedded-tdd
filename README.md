<center>
    <h1><b> Ceedling Unit Tests </b></h1>
</center>

## <b>Description</b>
Here's another ceedling TDD repo in this one i take do things a bit differently to the previous TDD approach: writing tests for an application that you are already working on which turned out to be really difficult. So on this project ill be starting out with a small test project.

### Cycle
1. Write a test, and watch it fail.
2. Implement just enough code to make the test pass.
3. Refactor.
4. Repeat.
## <b>Prerequisites</b>
- [Ceedling](http://www.throwtheswitch.org/ceedling)

## <b>Creating a new ceedling project</b>
Use the `ceedling new <projectName>` command to create a new project:
```bash
$ ceedling new rethink
```
This generates:
- `src` : Where all of the source files will go.
- `build` :  Contains anything generated by Ceedling during the build.
- `test` : Where our unit test files will go.

## <b>Creating a module</b>
```bash
$ ceedling module:create[lights]
File src/lights.c created
File src/lights.h created
File test/test_lights.c created
Generate Complete
```
This creates three files: lights.c to implement our module, lights.h to define the public APIs and a test file where unit tests for the module are created.

## <b>Run unit tests</b>

```bash
$ ceedling test:all


Test 'test_lights.c'
--------------------
Generating runner for test_lights.c...
Compiling test_lights_runner.c...
Compiling test_lights.c...
Compiling unity.c...
Compiling lights.c...
Compiling cmock.c...
Linking test_lights.out...
Running test_lights.out...

--------------------
IGNORED TEST SUMMARY
--------------------
[test_lights.c]
  Test: test_lights_NeedToImplement
  At line (17): "Need to Implement lights"

--------------------
OVERALL TEST SUMMARY
--------------------
TESTED:  1
PASSED:  0
FAILED:  0
IGNORED: 1
```

## Implement a test
In the testdriven way, we'll first add a test that describes some desired behavior. Say we want this
behavior:
`When the headlight switch is off, then the headlights are off`
The test function:
```c
void test_WhenTheHeadlightSwitchIsOff_ThenTheHeadLightsAreOff(void)
{
 // Switch off headlight
 lights_SetHeadlightSwitchOff();
 // Confirm the state of the headlights
 TEST_ASSERT_EQUAL(false, lights_AreHeadlightsOn());
}
```
## Implement the functionality
`lights.h`:
```bash
#ifndef lights_H
#define lights_H
#include <stdbool.h>
void lights_SetHeadlightSwitchOff(void);
bool lights_AreHeadlightsOn(void);
#endif // lights_H
```
`light.c` :
```bash
#include "lights.h"
#include <stdbool.h>
void lights_SetHeadlightSwitchOff(void)
{
}
bool lights_AreHeadlightsOn(void)
{
 return false;
}
```
Running the tests again:
```bash
$ ceedling test:all


Test 'test_lights.c'
--------------------
Running test_lights.out...

--------------------
OVERALL TEST SUMMARY
--------------------
TESTED:  1
PASSED:  1
FAILED:  0
IGNORED: 0
```

## Repeat
Add more tests and then write the code to make them pass

```bash
$ ceedling test:all


Test 'test_lights.c'
--------------------
Generating runner for test_lights.c...
Compiling test_lights_runner.c...
Compiling test_lights.c...
Compiling unity.c...
Compiling lights.c...
Compiling cmock.c...
Linking test_lights.out...
Running test_lights.out...

--------------------
OVERALL TEST SUMMARY
--------------------
TESTED:  2
PASSED:  2
FAILED:  0
IGNORED: 0
```